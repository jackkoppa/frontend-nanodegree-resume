// Maximum number of items to display
// Jobs
var maxJobs = 4;
// Projects
var maxProjects = 4;
var maxProjectImgs = 4;;var resume = resume || {};
resume["data"] = {
  "work": {
    "jobs": [
      {
        "employer": "Self-Employed",
        "title": "Web Developer",
        "location": "Milwaukee, WI, US",
        "date": {
          "startMonth": 1,
          "startYear": 2017,
          "endMonth": null,
          "endYear": null
        },
        "currentJob": true,
        "description": "Developing & designing client websites for a variety of purposes. Heavy focus on WordPress development, front-end technologies, and modern design. Work with clients at various points in their process: providing all design and development for sites from scratch, converting mock-ups to full-featured sites, or adding functionality/improving design for existing projects. Focused especially on companies in clean technology & environmental policy, where field-specific knowledge & marketing experience can be best utilized for environmental change.",
        "urls": [
          "http://jackkoppa.com"
        ]
      },
      {
        "employer": "Embark China",
        "title": "Program Manager",
        "location": "Shanghai, China",
        "date": {
          "startMonth": 10,
          "startYear": 2016,
          "endMonth": 1,
          "endYear": 2017
        },
        "description": "Design extracurricular programs for Chinese high school students, akin to experiences at the best US high schools. Create curricula in specific fields (esp. environmental science & web development) and facilitate a capstone project in that field, with a US partner. Provide a valuable int'l experience for our students, and dedicated, bright resources for our American collaborators.",
        "urls": [
          "http://embarkchina.org/En_US/"
        ]
      },
      {
        "employer": "Power Test Inc.",
        "title": "Contract Web Developer",
        "location": "Milwaukee, WI, US",
        "date": {
          "startMonth": 5,
          "startYear": 2016,
          "endMonth": 6,
          "endYear": 2016
        },
        "description": "Served as a senior web developer & consultant for a 3 week period, after the company transitioned to a WordPress site for SEO purposes, but was left with poor functionality, usability, and styling, and wanted to make significant immediate improvements, with future changes moved in-house. In 3 weeks I revamped the site’s design, customized their dashboards, implemented a translation system, developed a full salesperson bio system & personalized contact flow, while training an in-house marketing specialist to make future changes. The international flow, from homepage to info to contact, was a particular priority, and was greatly improved with session/cookie-specific IP recongition, with SEO-compatible local translated sites and salesperson-specific inquiries. The company is very happy with the changes, the in-house marketing specialist able to handle future updates, and online inquiries began rising within a month of completion.",
        "urls": [
          "http://jackkoppa.com/work/power-test-inc/"
        ]
      },
      {
        "employer": "USC Marshall School of Business",
        "title": "Web Developer",
        "location": "Los Angeles, CA, US",
        "date": {
          "startMonth": 3,
          "startYear": 2015,
          "endMonth": 5,
          "endYear": 2016
        },
        "description": "Developed & designed WordPress event site for the Marshall School's Asia Pacific Business Outlook conference (apboconference.com), creating custom pages for the event's 350+ attendees and 70+ speakers. Also assist with marketing and logistics for the 2 day event, along with other programs for the IBEAR MBA Program at Marshall.",
        "urls": [
          "http://jackkoppa.com/work/apbo/"
        ]
      },
      {
        "employer": "US-China Clean Tech Center",
        "title": "Web + Research Intern",
        "location": "Los Angeles, CA, US",
        "date": {
          "startMonth": 10,
          "startYear": 2014,
          "endMonth": 1,
          "endYear": 2016
        },
        "description": "Assisted in the design and development of UCCTC's new, cutting-edge B2B database platform for clean tech companies in the US and China. Worked on primary website (uschinacleantech.org), updating style, content, and functionality, while also assisting with websites for two new projects for the center: the Global Clean Vehicle Summit (globalcleanvehicle.org), and the Greenmaker Space, for Chinese cleantech companies seeking incubation assistance in the US (greenmaker.space). Worked in the bilingual Los Angeles office, while interacting heavily with the Beijing office.",
        "urls": [
          "http://jackkoppa.com/work/global-clean-vehicle/"
        ]
      },
      {
        "employer": "USC School of Cinematic Arts",
        "title": "Web Designer",
        "location": "Los Angeles, CA, US",
        "date": {
          "startMonth": 12,
          "startYear": 2014,
          "endMonth": 12,
          "endYear": 2015
        },
        "description": "Designed in-house event/conference website (\"the 9th week @ SCA\") using WordPress theme, while making custom adjustments to allow for participant signups, schedule updates, and easy dashboard management of speakers and sessions. In addition, made design & development changes to an interim main website for the Media Arts + Practice department, on a very short timeline required by server changes.",
        "urls": []
      },
      {
        "employer": "Pentair",
        "title": "Product Management Intern",
        "location": "Milwaukee, WI, US",
        "date": {
          "startMonth": 5,
          "startYear": 2013,
          "endMonth": 8,
          "endYear": 2013
        },
        "description": "As a product manager, updated a $2.6 million product line to better serve end consumers, identifying proper use instructions and new corporate branding. In this and other summer projects, worked with virtually all departments in Pentair's Residential, Commercial, & Industrial vertical, including facilities in China & Mexico. Led a a cross-functional team of 5 in Pentair's inaugural Cross-Charge Challenge, developing a complete marketing strategy for a high-potential product, to be implemented over the next year.",
        "urls": []
      }
    ]
  },
  "projects": {
    "projects": [
      {
        "title": "Chanje",
        "date": {
          "startMonth": 1,
          "startYear": 2017,
          "endMonth": 1,
          "endYear": 2017
        },
        "skills": [
          "WordPress",
          "PHP",
          "JavaScript",
          "HTML",
          "CSS",
          "jQuery",
          "PhotoShop"
        ],
        "description": {
          "short": "Commercial electric vehicle company launching their product line, and needed a professional, modern site to explain mission, team, and upcoming product line. Worked with Chanje's marketing team according to rough design guidelines, picked Zephyr WordPress theme as a base, and created Home, About, Team, Impact, Purpose, and Contact pages, as well as a Product template and form integration for customers to make vehicle reservations. Continuing to work with Chanje as functionality and available models increase, focusing on conveying the message of low-emission vehicles for the commercial market.",
          "long": null
        },
        "imageDir": "chanje",
        "images": [
          "chanje_home.jpg",
          "chanje_models.jpg",
          "chanje_team.jpg",
          "chanje_impact.jpg",
          "chanje_key_features.jpg",
          "chanje_connect.jpg"
        ],
        "urls": [
          "http://chanje.us"
        ]
      },
      {
        "title": "Power Test",
        "date": {
          "startMonth": 6,
          "startYear": 2016,
          "endMonth": 6,
          "endYear": 2016
        },
        "skills": [
          "WordPress",
          "PHP",
          "jQuery",
          "JavaScript",
          "HTML",
          "CSS",
          "PhotoShop"
        ],
        "description": {
          "short": "Take a corporate website recently migrated to WordPress and improve style cohesion, functionality, usability, and international contact flow, while training in-house marketing specialist",
          "long": [
            "Power Test Inc. had recently migrated their company site to WordPress, at the behest of SEO advisors. And indeed, Yoast SEO was installed, and there was improved logic to the home page headers. Past that, however, there was much to be desired in the site: different pages had inconsistent styling, navigation, and flow; the site lacked central design tenets; pages were difficult to find, and some important ones, nonexistent; very limited use was made of media; and the contact flow was extremely difficult and impersonal. The other issue Power Test faced was that, to address any of these issues, hiring the same outside firm had become prohibitively expensive.",
            "When I joined for a 3 week stint doing development and consulting, I spent the first 2-3 days discussing the company, their products, and a typical flow for a potential customer through the site. I met with the President, sales staff, and the sole marketing specialist for the small/medium company. It was quickly determined that customers, in the market for dynamometers (industrial equipment used to test very large engines), would likely need to follow one of three paths: knew nothing about testing aside from they wanted to test engines; already knew what product(s) they were interested in, and were trying to learn about Power Test itself as a reliable partner; or already knew about both those topics, and were just trying to reach out.",
            "With this in mind, I set out to improve flows through the site for all 3 types of customers. This meant vastly simpler navigation, consistent formatting across the site, short explanations on intro screens, more detailed explanations on product group pages, and consistent encouragement towards the contact page.",
            "Aside from large style improvements, embracing a “card” aesthetic, the most significant change was to the contact page. It is now personalized, by using a user’s IP address to show which salesperson is responsible for their region. They’ll be hearing from this salesperson after submitting the form, which itself has been greatly reduced in complexity, with the theory that some contact is much better for the phone-based company than no contact. Finally, the same IP recognition is used to hold together a rather complex international targeting/translation implementation, with cookies/sessions: upon a first visit to the site, a foreign user is asked in their native tongue if they would like to view their local version. If so, subdirectories are used to provide machine-translated versions of every single page. Very importantly, these machine-generated pages are both human-editable (for the company’s future growth), and distinct server-side pages, allowing for SEO targeting of each subdirectory to a language and, in some cases, a country. Thanks go to the maker of WeGlot, which makes the machine-translation aspect possible.",
            "The last aspect of the work was training the in-house marketing specialist to handle future updates. Peter had some web design experience previously, but was able to quickly pick up the basics of server-database-dashboard, the various essential files for a WordPress theme, and the flow of information that determines what displays on each important page. With this training, Peter has been able to continue making updates to the site, upper management is very excited to be free of an outside agency that wasn’t working for them, and most importantly, inquiries through the site have increased 200% at this point."
          ]
        },
        "imageDir": "power_test",
        "images": [
          "power_test_industries.jpg",
          "power_test_contact.jpg",
          "power_test_home.jpg",
          "power_test_dyno_accessories.jpg",
          "power_test_we_make_it_better.jpg"
        ],
        "urls": [
          "http://powertestdyno.com"
        ]
      },
      {
        "title": "PixBox",
        "date": {
          "startMonth": 9,
          "startYear": 2015,
          "endMonth": 12,
          "endYear": 2015
        },
        "skills": [
          "JavaScript",
          "Backbone.js",
          "Node.js",
          "Sass",
          "Parse",
          "Git",
          "Grunt",
          "HTML",
          "CSS"
        ],
        "description": {
          "short": "Full photo-sharing web application, designed to make group collaboration and editing simple and accessible, with SMS integration and responsive design. Created as a Backbone.js app from scratch, with a team of 4, using a Parse database as the backend",
          "long": [
            "PixBox is a simple, beautiful, group-oriented photo sharing web application. The goal as conceived by Aadit Patel, my client for the project, is to make shared events easily captured in photos by all attending, with all attending easily accessing the photos taken.",
            "To tackle the challenge, I project managed a team of 3 other student developers in USC’s capstone web development class. Tiago (Development), Allara (Design), Peter (Development), and myself (PM/Development) needed to provide some essential functionality:",
            "sign up for account, verification method being SMS",
            "attractive dashboard, with options to view current albums, join friends’ albums, create a new album, and edit settings",
            "create album flow that allows for easy invitation of friends to view & contribute, through both SMS (for new accounts) and users (for existing accounts)",
            "individual album pages display photos, allow for easy sharing & download, as well as user management (add/remove)",
            "bonus features, such as attractive loading & signup animations, plus profile editing",
            "We were tasked with the creation of this web app in the Fall of 2015 semester, and to finish, we needed to jump right in. The app would be built with Parse as the backend database, leaving us to choose front-end frameworks, server-side code, styling, and version control. We went with Backbone.js as our MVC framework, for its heavy documentation, ease of implementation with Parse, and low barrier to entry for all four of us. We used a version of Node.js for our server-side JavaScript, SASS for styling, and Git/Jira for version & project management. Throughout, I tried to keep us on a flexible schedule – our client was great about providing design documents, which put us on a great path from the outset. The biggest struggle was changing compatibility standards for Parse, which we managed by staying in consistent contact with each other, updating the team on where we had success and issues, sticking to an agile (weekly sprints) methodology.",
            "In the end, I was responsible for both project management, and a large portion of the development heavy lifting. With Tiago, I was able to learn the intricacies of Backbone.js, and learned to love it while finishing a fully functional, SMS-integrated photo sharing web app. We are proud of the result, shown above, which matches Aadit’s great vision, and will hopefully be launched to the public in the near future. At the end of the semester, I dove deep into our code, to add additional comments where necessary, and provide a guidance document for Aadit, should he choose to add features in the future. A great experience in team leadership, and creating a product we could be proud of, in about 3 months.",
            "(PixBox is currently still private, but if you would like to view the app itself, please don’t hesitate to get in touch, and I’d be happy to provide a link/code samples)"
          ]
        },
        "imageDir": "pixbox",
        "images": [
          "pixbox_album.jpg",
          "pixbox_dashboard.jpg",
          "pixbox_invite_members.jpg",
          "pixbox_login.jpg",
          "pixbox_mobile.jpg",
          "pixbox_new_album.jpg"
        ],
        "urls": []
      },
      {
        "title": "FrackMented",
        "date": {
          "startMonth": 11,
          "startYear": 2013,
          "endMonth": 12,
          "endYear": 2013
        },
        "skills": [
          "HTML",
          "CSS",
          "jQuery",
          "JavaScript",
          "Photoshop",
          "Research"
        ],
        "description": {
          "short": "Contextualizes current \"fracking\" policy issues, using meta-data and a tiled interface. ",
          "long": [
            "The power to truly see an issue from many different angles is usually available only to those who intensely research. More casual interest is usually rewarded with a one-sided soundbite or paragraph. Our policy system, however, requires that a large percentage of voters be informed beyond one side of an issue. FrackMented is a look at how such informing could improve.",
            "The subject of the website is hydraulic fracturing, or “fracking”, a hotly contested process to recover gas/oil from shale rock. The policy approach to fracking is far from settled, so FrackMented aims to be an unbiased, particularly useful source of information. For every story it offers – whether about a fracking victory, or defeat, or mention in popular culture – FrackMented provides at least 3-4 pieces of meta-data, in an easily accessible tiled interface, to help maximize perspective gained while minimizing time. This meta-data includes location on map, relevant state, headline, quick summary, full text, and a related piece of media (picture, video, graph, etc.).",
            "Surfing the internet’s tides of opinions and information can be particularly difficult when researching a topic with limited time. FrackMented provides a template for dissecting some of the major present day policy issues we face, in a way that can inform and liberate voters."
          ]
        },
        "imageDir": "frackmented",
        "images": [
          "frackmented_landing.jpg",
          "frackmented_layout1.jpg",
          "frackmented_layout2.jpg"
        ],
        "urls": [
          "http://FrackMented.jackkoppa.com",
          "https://github.com/jackkoppa/FrackMented"
        ]
      },
      {
        "title": "Peaks and Professors",
        "date": {
          "startMonth": 8,
          "startYear": 2013,
          "endMonth": 5,
          "endYear": 2016
        },
        "skills": [
          "WordPress",
          "PHP",
          "MySQL",
          "HTML",
          "CSS",
          "jQuery",
          "JavaScript",
          "Photoshop"
        ],
        "description": {
          "short": "Created engaging & useful website for one of USC's fastest-growing clubs, leading hikes for students & professors. As co-founder, handled all technical aspects of the club (WordPress website, online payments, event management, MailChimp), growing from 4 trips our first semester, to 30+ each semester by the time of graduation. Site now handles 200+ simultaneous users during trip sign-ups and $6,000+ in annual online transactions; club named USC's Student Organization of the Year for 2016, out of 800+ clubs.",
          "long": [
            "Peaks and Professors is a fairly new organization on USC’s campus – with 3 friends, I helped co-found the club in Summer of 2013. Our goal is to lead hikes for small groups of students, around the SoCal area, each time taking along a different USC Professor. This fosters communication outside the classroom, as well as a great appreciation of nature. Immediately, we realized that the best and most convenient communication route for us would be entirely online, almost entirely on our own website.",
            "I immediately began searching for appropriate design options, and eventually came across Earth 2.0, a theme on ThemeForest that loosely suited our organization’s goals. Since then, I have been customizing, tweaking, dramatically updating, and personalizing our site, in order to accomplish three main goals: club promotion, ease of use by students, and ease of use by club leaders.",
            "To that end, peaksandprofessors.org has a variety of unique features: an email newsletter sign-up form on most pages, since that is the most important way for us to reach new student members, a calendar of upcoming trips with multiple views, a filter-able list of Professors, and perhaps most importantly, a completely custom backend. This customized dashboard allows any leader in the club to make edits to trip pages with no coding knowledge, while still keeping design consistent across the site.",
            "These updates have proved quite successful: since that Summer of 2013, up to May 2016, we have had over 80 trips, have 2,000+ email subscribers, and over 1,500 followers on Facebook. Perhaps most impressively, in 2016 Peaks and Professors was named USC's Student Organization of the Year, out of 800+ clubs. The most consistent comment from people who have signed up for the club? “I love the website!”"
          ]
        },
        "imageDir": "peaks_and_professors",
        "images": [
          "peaks_and_professors_dashboard.jpg",
          "peaks_and_professors_individual_trips.jpg",
          "peaks_and_professors_trips.jpg"
        ],
        "urls": [
          "http://peaksandprofessors.com",
          "https://news.usc.edu/99581/no-lectern-no-laptop-no-problem-for-trojans-hiking-on-socals-scenic-trails/"
        ]
      }
    ]
  },
  "bio": {
    "name": "Jack Koppa",
    "role": "Web Developer | Cleantech Advocate",
    "welcomeMessage": "Hi - I make things with a purpose.",
    "biopic": "jack_koppa_profile.jpg",
    "contacts": {
      "mobile": "+1 650.761.1414",
      "email": "hello@jackkoppa.com",
      "github": "jackkoppa",
      "twitter": "jackpkoppa",
      "linkedin": "jackkoppa",
      "location": "Milwaukee, WI, US"
    },
    "skills": [
      "HTML",
      "CSS",
      "JavaScript",
      "jQuery",
      "WordPress",
      "PHP",
      "Sass",
      "React.js",
      "Backbone.js"
    ]
  },
  "education": {
    "schools": [
      {
        "name": "University of Southern California",
        "location": "Los Angeles, CA, US",
        "degree": "BA",
        "major": [
          "Environmental Studies",
          "Chinese"
        ],
        "minor": [
          "Digital Studies"
        ],
        "date": {
          "startMonth": 8,
          "startYear": 2012,
          "endMonth": 5,
          "endYear": 2016
        },
        "url": "https://dornsife.usc.edu/"
      },
      {
        "name": "Capital Normal University",
        "location": "Beijing, China",
        "degree": "Study Abroad",
        "major": [
          "Chinese Language"
        ],
        "date": {
          "startMonth": 5,
          "startYear": 2014,
          "endMonth": 7,
          "endYear": 2014
        },
        "url": "https://dornsife.usc.edu/ealc/beijing-program/"
      }
    ],
    "onlineCourses": [
      {
        "title": "Front-End Web Developer Nanodegree",
        "school": "Udacity",
        "date": {
          "startMonth": 1,
          "startYear": 2017,
          "endMonth": null,
          "endYear": null
        },
        "dates": "Jan 2016 - present",
        "url": "https://www.udacity.com/course/front-end-web-developer-nanodegree--nd001"
      }
    ]
  }
};;var HTMLheaderName = '<h1 id="name">%data%</h1>';
var HTMLheaderRole = '<span>%data%</span><hr>';

var HTMLcontactGeneric = '<li class="flex-item"><span class="orange-text">%contact%</span><span class="white-text">%data%</span></li>';
var HTMLmobile = '<li class="flex-item"><span class="orange-text">mobile</span><span class="white-text">%data%</span></li>';
var HTMLemail = '<li class="flex-item"><span class="orange-text">email</span><span class="white-text">%data%</span></li>';
var HTMLtwitter = '<li class="flex-item"><span class="orange-text">twitter</span><span class="white-text">%data%</span></li>';
var HTMLgithub = '<li class="flex-item"><span class="orange-text">github</span><span class="white-text">%data%</span></li>';
var HTMLblog = '<li class="flex-item"><span class="orange-text">blog</span><span class="white-text">%data%</span></li>';
var HTMLlocation = '<li class="flex-item"><span class="orange-text">location</span><span class="white-text">%data%</span></li>';

var HTMLbioPic = '<img src="%data%" class="biopic">';
var HTMLwelcomeMsg = '<span class="welcome-message">%data%</span>';

var HTMLskillsStart = '<h3 id="skills-h3">Skills at a Glance:</h3><ul id="skills" class="flex-column"></ul>';
var HTMLskills = '<li class="flex-item"><span class="white-text">%data%</span></li>';

var HTMLworkStart = '<div class="work-entry"></div>';
var HTMLworkEmployer = '<a href="#">%data%';
var HTMLworkTitle = ' - %data%</a>';
var HTMLworkDates = '<div class="date-text">%data%</div>';
var HTMLworkLocation = '<div class="location-text">%data%</div>';
var HTMLworkDescription = '<p><br>%data%</p>';

var HTMLprojectStart = '<div class="project-entry"></div>';
var HTMLprojectTitle = '<a href="#">%data%</a>';
var HTMLprojectDates = '<div class="date-text">%data%</div>';
var HTMLprojectDescription = '<p><br>%data%</p>';
var HTMLprojectImage = '<img src="%data%">';

var HTMLschoolStart = '<div class="education-entry"></div>';
var HTMLschoolName = '<a href="#">%data%';
var HTMLschoolDegree = ' -- %data%</a>';
var HTMLschoolDates = '<div class="date-text">%data%</div>';
var HTMLschoolLocation = '<div class="location-text">%data%</div>';
var HTMLschoolMajor = '<em><br>Major: %data%</em>';

var HTMLonlineClasses = '<h3>Online Classes</h3>';
var HTMLonlineTitle = '<a href="#">%data%';
var HTMLonlineSchool = ' - %data%</a>';
var HTMLonlineDates = '<div class="date-text">%data%</div>';
var HTMLonlineURL = '<br><a href="#">%data%</a>';

var internationalizeButton = '<button>Internationalize</button>';
var googleMap = '<div id="map"></div>';

// Internationalize
$(document).ready(function() {
    $('button').click(function() {
        var $name = $('#name');
        var iName = inName($name.text()) || function(){};
        $name.html(iName);
    });
});

// Click locations
var clickLocations = [];

function logClicks(x,y) {
    clickLocations.push(
        {
            x: x,
            y: y
        }
    );
    console.log('x location: ' + x + '; y location: ' + y);
}



// Map
var map;    // declares a global map variable


/*
Start here! initializeMap() is called when page is loaded.
*/
function initializeMap() {

    var locations;

    var mapOptions = {
        disableDefaultUI: true
    };

    /*
    For the map to be displayed, the googleMap var must be
    appended to #mapDiv in resumeBuilder.js.
    */
    map = new google.maps.Map(document.querySelector('#map'), mapOptions);


    /*
    locationFinder() returns an array of every location string from the JSONs
    written for bio, education, and work.
    */
    function locationFinder() {

        // initializes an empty array
        var locations = [];

        // adds the single location property from bio to the locations array
        locations.push(bio.contacts.location);

        // iterates through school locations and appends each location to
        // the locations array. Note that forEach is used for array iteration
        // as described in the Udacity FEND Style Guide:
        // https://udacity.github.io/frontend-nanodegree-styleguide/javascript.html#for-in-loop
        education.schools.forEach(function(school){
            locations.push(school.location);
        });

        // iterates through work locations and appends each location to
        // the locations array. Note that forEach is used for array iteration
        // as described in the Udacity FEND Style Guide:
        // https://udacity.github.io/frontend-nanodegree-styleguide/javascript.html#for-in-loop
        work.jobs.forEach(function(job){
            locations.push(job.location);
        });

        return locations;
    }

    /*
    createMapMarker(placeData) reads Google Places search results to create map pins.
    placeData is the object returned from search results containing information
    about a single location.
    */
    function createMapMarker(placeData) {

        // The next lines save location data from the search result object to local variables
        var lat = placeData.geometry.location.lat();  // latitude from the place service
        var lon = placeData.geometry.location.lng();  // longitude from the place service
        var name = placeData.formatted_address;   // name of the place from the place service
        var bounds = window.mapBounds;            // current boundaries of the map window

        // marker is an object with additional data about the pin for a single location
        var marker = new google.maps.Marker({
            map: map,
            position: placeData.geometry.location,
            title: name
        });

        // infoWindows are the little helper windows that open when you click
        // or hover over a pin on a map. They usually contain more information
        // about a location.
        var infoWindow = new google.maps.InfoWindow({
            content: name
        });

        // hmmmm, I wonder what this is about...
        google.maps.event.addListener(marker, 'click', function() {
            // your code goes here!
        });

        // this is where the pin actually gets added to the map.
        // bounds.extend() takes in a map location object
        bounds.extend(new google.maps.LatLng(lat, lon));
        // fit the map to the new marker
        map.fitBounds(bounds);
        // center the map
        map.setCenter(bounds.getCenter());
    }

    /*
    callback(results, status) makes sure the search returned results for a location.
    If so, it creates a new map marker for that location.
    */
    function callback(results, status) {
        if (status == google.maps.places.PlacesServiceStatus.OK) {
            createMapMarker(results[0]);
        }
    }

    /*
    pinPoster(locations) takes in the array of locations created by locationFinder()
    and fires off Google place searches for each location
    */
    function pinPoster(locations) {

        // creates a Google place search service object. PlacesService does the work of
        // actually searching for location data.
        var service = new google.maps.places.PlacesService(map);

        // Iterates through the array of locations, creates a search object for each location
            locations.forEach(function(place){
            // the search request object
            var request = {
                query: place
            };

            // Actually searches the Google Maps API for location data and runs the callback
            // function with the search results after each search.
            service.textSearch(request, callback);
        });
    }

    // Sets the boundaries of the map based on pin locations
    window.mapBounds = new google.maps.LatLngBounds();

    // locations is an array of location strings returned from locationFinder()
    locations = locationFinder();

    // pinPoster(locations) creates pins on the map for each location in
    // the locations array
    pinPoster(locations);

}

/*
Uncomment the code below when you're ready to implement a Google Map!
*/

// Calls the initializeMap() function when the page loads
//window.addEventListener('load', initializeMap);

// Vanilla JS way to listen for resizing of the window
// and adjust map bounds
//window.addEventListener('resize', function(e) {
    //Make sure the map bounds get updated on page resize
//  map.fitBounds(mapBounds);
//});
;/*
An implementation of this project drawing from a centralized JSON feed would use something like
the following AJAX call to pull in resume.json data. This project, though, makes use of the
`grunt compileJS` function in the `resume-data` repo, which will output a resume.js file.
resume.js is then directly concatenated into resumeScripts.js file, so it's accessible below.
*/
/*
var resume = {}
resume.data = (function() {
    var json = null;
    $.ajax({
        'async': false,
        'global': false,
        'url': "./resume-data/resume.json",
        'dataType': "json",
        'success': function (data) {
            json = data;
        }
    });
    return json;
})();
*/


var bio = resume.data.bio;
var education = resume.data.education;
var work = resume.data.work;
var projects = resume.data.projects;

// format date from date objects; takes 2 arguments
function formatDate(rawDate,shortForm = true) {
    if (rawDate) {
        var monthsShort = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];
        var monthsLong = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
        var msg = "";
        var monthsArray = shortForm ? monthsShort : monthsLong;
        msg = monthsArray[rawDate.startMonth + 1] + " " + rawDate.startYear;
        if (rawDate.startMonth !== rawDate.endMonth && rawDate.startYear !== rawDate.endYear) {
            msg += rawDate.endMonth ? " - " + monthsArray[rawDate.endMonth] + " " + rawDate.endYear : "";
        }
        return msg;
    } else {
        return false;
    }
}

bio.displayContacts = function() {
    for (var contact in this.contacts) {
        if (this.contacts.hasOwnProperty(contact)) {
            $("#footerContacts").append(HTMLcontactGeneric.replace("%contact%",contact).replace("%data%",contacts[contact]));
        }
    }
}

work.display = function() {
	work.jobs.forEach(function importWork(job) {
		$("#workExperience").append(HTMLworkStart);
		var employer = HTMLworkEmployer.replace("%data%",job.employer);
		var title = HTMLworkTitle.replace("%data%",job.title);
		var dates = formatDate(job.date) ? HTMLworkDates.replace("%data%",formatDate(job.date)) : "";
		var location = HTMLworkLocation.replace("%data%",job.location);
		var description = HTMLworkDescription.replace("%data%",job.description);
		$(".work-entry:last").append(employer + title + dates + location + description);
	});
}

projects.display = function() {
	this.projects.forEach(function(project) {
		$("#projects").append(HTMLprojectStart);
		var title = HTMLprojectTitle.replace("%data%",project.title);
        var dates = formatDate(project.date) ? HTMLworkDates.replace("%data%",formatDate(project.date)) : "";
        // Using the short description for projects
		var description = HTMLprojectDescription.replace("%data%",project.description.short);
		var images = [];
		project.images.forEach(function(url) {
			images.push(HTMLprojectImage.replace("%data%",url));
		});
		$(".project-entry:last").append(title + dates + description + images.join(""));
	});
}


work.display();
projects.display();


if (bio.skills.length > 0) {
	console.log("skills exist");
	$("#header").append(HTMLskillsStart);
	bio.skills.forEach(function(skill) {
		$("#skills").append(HTMLskills.replace("%data%",skill));
	});
}


$(document).click(function(loc) {
	logClicks(loc.pageX, loc.pageY);
})

$("#main").append(internationalizeButton);

function inName(name) {
	var nameArray = name.split(" ");
	nameArray[1] = nameArray[1].toUpperCase();
	nameArray[0] = nameArray[0].charAt(0).toUpperCase() + nameArray[0].slice(1,nameArray[0].length).toLowerCase();
	return nameArray.join(" ");
}